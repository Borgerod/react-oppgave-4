import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";
import { IoMenu } from "react-icons/io5";
import { cn } from "@/utils/cn";
import Providers from "@/providers";
import { IoSearch } from "react-icons/io5";
import ThemeToggle from "@/components/themeToggle";

const geistSans = Geist({
	variable: "--font-geist-sans",
	subsets: ["latin"],
});

const geistMono = Geist_Mono({
	variable: "--font-geist-mono",
	subsets: ["latin"],
});

export const metadata: Metadata = {
	title: "Create Next App",
	description: "Generated by create next app",
};

const Search = ({ children }: { children: React.ReactNode }) => (
	<div
		className={cn(
			"relative rounded-md",
			"bg-white/15 hover:bg-white/25",
			"w-xl",
			"p-2 flex flex-row",
			"items-center justify-left"
		)}
	>
		{children}
	</div>
);

const SearchIconWrapper = ({ children }: { children: React.ReactNode }) => (
	<div className="px-4 h-full pointer-events-none flex items-center justify-center">
		{children}
	</div>
);

const StyledInputBase = (
	props: React.InputHTMLAttributes<HTMLInputElement>
) => (
	<input
		{...props}
		className={cn(
			"text-inherit py-2 pr-2 transition-width w-full md:w-[20ch] bg-transparent outline-none"
		)}
	/>
);

export default function RootLayout({
	children,
}: Readonly<{
	children: React.ReactNode;
}>) {
	return (
		<html lang="en" suppressHydrationWarning>
			<body
				className={cn(
					`${geistSans.variable} ${geistMono.variable} antialiased`,
					"bg-background text-foreground",
					"px-6 py-20",
					"",
					""
				)}
			>
				<Providers>
					<header className="absolute inset-x-0 top-0 bg-transparent">
						<div
							className={cn(
								"flex flex-row justify-between items-center",
								"gap-5 max-w-6xl mx-auto px-6 py-4"
							)}
						>
							<div className="text-nowrap">GutenDex Library</div>
							<Search>
								<SearchIconWrapper>
									<IoSearch />
								</SearchIconWrapper>
								<StyledInputBase
									placeholder="Searchâ€¦"
									aria-label="search"
								/>
							</Search>
							<button aria-label="menu" className="p-2">
								<IoMenu />
							</button>
						</div>
					</header>
					{children}
					<ThemeToggle />
				</Providers>
			</body>
		</html>
	);
}
